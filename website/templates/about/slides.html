<div class="slide-wrap">
    <div class="slide-div">

        <div id="slide-1" class="slide-item" style="background-color: red">
            {% include 'about/slides/intro_slide.html' %}
        </div>
        <div id="slide-2" class="slide-item" style="background-color: white">
            {% include 'about/slides/slide_2.html' %}
        </div>
        <div id="slide-3" class="slide-item" style="background-color: green">
            {% include 'about/slides/slide_3.html' %}
        </div>
        <div id="slide-4" class="slide-item" style="background-color: blue">
            {% include 'about/slides/slide_4.html' %}
        </div>
        <div id="slide-5" class="slide-item" style="background-color: blue">
            {% include 'about/slides/slide_5.html' %}
        </div>
    </div>
</div>

<div class="indicator-div">
    <div id="indicator-1" class="row indicator-container">
        <div class="slide-point">
        <p id="title-1" class="slide-title">
            Intro
        </p>
        </div>
    </div>
    <div id="indicator-2" class="row indicator-container">
        <div class="slide-point">
            <p id="title-2" class="slide-title">
                2007 - 2012
            </p>
        </div>
    </div>
    <div id="indicator-3" class="row indicator-container">
        <div class="slide-point">
            <p id="title-3" class="slide-title">
                2018
            </p>
        </div>
    </div>
    <div id="indicator-4" class="row indicator-container">
        <div class="slide-point">
            <p id="title-4" class="slide-title">
                2020
            </p>
        </div>
    </div>
    <div id="indicator-5" class="row indicator-container">
        <div class="slide-point">
            <p id="title-5" class="slide-title">
                2020 - Present
            </p>
        </div>
    </div>
</div>


<script>

    function changeSlide(index) {
        const targetSlide = document.getElementById(`slide-${index+1}`);
        if (index+1 == 2 && !visitedBefore) {
            targetSlide.scrollIntoView({
                behavior: 'instant',
                block: 'center',
                inline: 'center'
            });

            onSlideLoad();
        } else {

            targetSlide.scrollIntoView({
                behavior: 'smooth',
                block: 'center',
                inline: 'center'
            });

        }
    }

    function animateText (element){
        console.log(element)
        let id = null;
        const targetText = document.getElementById(`${element}`);
        let opacity = 0;
        let transformation = 0;
        id = setInterval(function (event){
            easeTextIn(event);
        }, 5)

        function easeTextIn() {
            if (transformation > 1){
                targetText.style.filter = `blur(${0}em)`
                clearInterval(id)
            } else {
                transformation += 0.05;
                targetText.style.filter = `blur(${1 - transformation}em)`
            }
        }
    }

    function onLoad() {
        const indicators = document.getElementsByClassName("slide-point");
        Array.from(indicators).forEach(function (element, index) {
            element.addEventListener("click", function () {
                changeSlide(index);
            })

            element.addEventListener("mouseover", function () {
                animateText(element.children[0].id);
            })
        })
    }

    document.addEventListener("DOMContentLoaded", onLoad);


</script>