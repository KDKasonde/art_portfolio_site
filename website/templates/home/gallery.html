<div id="gallery">
</div>

<script>
    const gallery_div = document.getElementById("gallery")
    {% for index in range(image_list|length) %}


        {% if index == 0 or index%8 == 0 %}
            var ul_elem = document.createElement("ul")
        {% endif %}

        {% if index%4 == 0 and index > 0 %}
            var li_elem = document.createElement("li")
            li_elem.setAttribute("style", "flex-basis: 100%; height: 0;" )
            ul_elem.appendChild(li_elem)
            gallery_div.appendChild(ul_elem)
        {% endif %}

        var li_elem = document.createElement("li")
        var elem = document.createElement("img")
        elem.setAttribute("src", "{{ url_for('static', filename = 'assets/gallery/' + image_list[index]) }}" )
        li_elem.appendChild(elem)
        ul_elem.appendChild(li_elem)
        gallery_div.appendChild(ul_elem)

    {% endfor %}
</script>